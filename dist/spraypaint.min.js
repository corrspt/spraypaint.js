!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.spraypaint={})}(this,function(t){"use strict";var z=function(t,e){return(z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function c(t,e){function r(){this.constructor=t}z(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var I=function(){return(I=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function e(t,e,r,i){var n,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;0<=a;a--)(n=t[a])&&(o=(s<3?n(o):3<s?n(e,r,o):n(e,r))||o);3<s&&o&&Object.defineProperty(e,r,o)}function s(t,o,a,c){return new(a=a||Promise)(function(r,e){function i(t){try{s(c.next(t))}catch(t){e(t)}}function n(t){try{s(c.throw(t))}catch(t){e(t)}}function s(t){var e;t.done?r(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(i,n)}s((c=c.apply(t,o||[])).next())})}function u(i,n){var s,o,a,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(r){return function(t){var e=[r,t];if(s)throw new TypeError("Generator is already executing.");for(;c;)try{if(s=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,(e=a?[2&e[0],a.value]:e)[0]){case 0:case 1:a=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,o=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(a=0<(a=c.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){c.label=e[1];break}if(6===e[0]&&c.label<a[1]){c.label=a[1],a=e;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(e);break}a[2]&&c.ops.pop(),c.trys.pop();continue}e=n.call(i,c)}catch(t){e=[6,t],o=0}finally{s=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}}}r.apply=function(t,e){new r(t,e).apply()},r.prototype.apply=function(){var i=this,n={};this.payload.errors&&(this.payload.errors.forEach(function(t){var e=t.meta;if(!e)throw new Error("invalid json");var r=e.relationship;r?i._processRelationship(i.model,r,t):i._processResource(n,e,t)}),this.model.errors=n)},r.prototype._processResource=function(t,e,r){var i=this.model.klass.deserializeKey(e.attribute);t[i]={title:r.title,code:r.code,attribute:e.attribute,message:e.message,fullMessage:"base"===i?e.message:r.detail,rawPayload:r}},r.prototype._processRelationship=function(t,e,r){var i,n,s=t[t.klass.deserializeKey(e.name)];Array.isArray(s)&&(s=s.find(function(t){return t.id&&String(t.id)===String(e.id)||t.temp_id&&t.temp_id===e["temp-id"]})),e.relationship?this._processRelationship(s,e.relationship,r):(this._processResource(i={},e,r),n={},Object.keys(s.errors).forEach(function(t){n[t]=s.errors[t]}),Object.keys(i).forEach(function(t){var e=i[t];void 0!==e&&(n[t]=e)}),s.errors=n)};var L=r;function r(t,e){this.model=t,this.payload=e}function M(t,e){(e=e.headers.get("X-JWT"))&&t.setJWT(e)}function U(t,e){return function(){if(typeof window===undefined)if(/^screen|^xterm|^vt100|color|ansi|cygwin|linux/i.test(process.env.TERM))return true;else return false;else return false}()?"["+(t=B[t])[0]+"m"+e+"["+t[1]+"m":e}var B={green:[32,39],cyan:[36,39],magenta:[35,39],bold:[1,22]},N=(i.prototype.get=function(t,e){return e.method="GET",this._fetchWithLogging(t,e)},i.prototype.post=function(t,e,r){return r.method="POST",r.body=JSON.stringify(e),this._fetchWithLogging(t,r)},i.prototype.patch=function(t,e,r){return this.config.patchAsPost?(r.method="POST",r.headers||(r.headers={}),r.headers["X-HTTP-Method-Override"]="PATCH"):r.method="PATCH",r.body=JSON.stringify(e),this._fetchWithLogging(t,r)},i.prototype.delete=function(t,e){return e.method="DELETE",this._fetchWithLogging(t,e)},i.prototype._logRequest=function(t,e){this.logger.info(U("cyan",t+": ")+U("magenta",e))},i.prototype._logResponse=function(t){this.logger.debug(U("bold",JSON.stringify(t,null,4)))},i.prototype._fetchWithLogging=function(r,i){return s(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return this._logRequest(i.method||"UNDEFINED METHOD",r),[4,this._fetch(r,i)];case 1:return e=t.sent(),this._logResponse(e.jsonPayload),[2,e]}})})},i.prototype._fetch=function(i,n){return s(this,void 0,void 0,function(){var e,r;return u(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.middleware.beforeFetch(i,n)];case 1:return t.sent(),[3,3];case 2:throw r=t.sent(),new K("beforeFetch failed; review middleware.beforeFetch stack",i,n,r);case 3:return t.trys.push([3,5,,6]),[4,fetch(i,n)];case 4:return e=t.sent(),[3,6];case 5:throw r=t.sent(),new o(null,r.message,r);case 6:return[4,this._handleResponse(e,n)];case 7:return t.sent(),[2,e]}})})},i.prototype._handleResponse=function(i,n){return s(this,void 0,void 0,function(){var e,r;return u(this,function(t){switch(t.label){case 0:if("DELETE"===n.method&&-1<[204,200].indexOf(i.status))return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i.clone().json()];case 2:return e=t.sent(),[3,4];case 3:if(r=t.sent(),-1<[202,204].indexOf(i.status))return[2];throw new o(i,"invalid json",r);case 4:return t.trys.push([4,6,,7]),[4,this.middleware.afterFetch(i,e)];case 5:return t.sent(),[3,7];case 6:throw r=t.sent(),new o(i,"afterFetch failed; review middleware.afterFetch stack",r);case 7:if(500<=i.status)throw new o(i,"Server Error");if(422!==i.status&&void 0===e.data)throw 404===i.status?new o(i,"record not found"):new o(i,"invalid json");return i.jsonPayload=e,[2]}})})},i);function i(t,e,r){this.middleware=t,this.logger=e,this.config=Object.assign({patchAsPost:!1},r)}c(W,J=Error);var J,K=W;function W(t,e,r,i){t=J.call(this,t)||this;return t.stack=i.stack,t.url=e,t.options=r,t.originalError=i,t}c(q,H=Error);var H,o=q;function q(t,e,r){e=H.call(this,e||"Invalid Response")||this;return e.response=t,e.originalError=r,e}n.prototype.toScopeObject=function(){var t,e={};for(t in this.dct)this.dct.hasOwnProperty(t)&&(e[t]=this.dct[t].toScopeObject());return e},n.prototype.toString=function(){var t,r=[],i=this;for(t in this.dct)!function(e){var t;i.dct.hasOwnProperty(e)&&(""===(t=i.dct[e].toString())?r.push(e):(t=(t=t.split(",")).map(function(t){return e+"."+t}),r.push(t.join(","))))}(t);return r.join(",")},n.prototype._parseIncludeArgs=function(t){var e;return Array.isArray(t)?this._parseArray(t):"string"==typeof t?((e={})[t]={},e):"object"==typeof t?this._parseObject(t):{}},n.prototype._parseObject=function(t){var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[e]=this._parseIncludeArgs(t[e]));return r},n.prototype._parseArray=function(t){for(var e={},r=0,i=t;r<i.length;r++){var n,s=i[r],o=this._parseIncludeArgs(s);for(n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}return e};var G=n;function n(t){this.dct={};var e,r=this._parseIncludeArgs(t);for(e in r)r.hasOwnProperty(e)&&(this.dct[e]=new n(r[e]))}var Z=0,V=function(){return"temp-id-"+ ++Z},Q=(a.prototype.attributes=function(){var i=this,n={};return this._eachAttribute(function(t,e,r){t=i.model.klass.serializeKey(t);r.type===Number&&""===e?n[t]=null:n[t]=e}),n},a.prototype.removeDeletions=function(e,s){var o=this;Object.keys(s).forEach(function(r){var i=s[r],n=e,t=n[r];t&&(Array.isArray(t)?t.forEach(function(t,e){t.isMarkedForDestruction||t.isMarkedForDisassociation?n[r].splice(e,1):o.removeDeletions(t,i)}):(t=t).isMarkedForDestruction||t.isMarkedForDisassociation?n[r]=null:o.removeDeletions(t,i))})},a.prototype.postProcess=function(){this.removeDeletions(this.model,this.includeDirective),this.model.resetRelationTracking(this.includeDirective)},a.prototype.relationships=function(){var o=this,a={};return Object.keys(this.model.klass.attributeList).forEach(function(t){var e,r,i,n=o.model.klass.attributeList[t],s=n.name;n.isRelationship&&(e=o.includeDirective[t],r=!1,-1<t.indexOf(".")&&(t=t.split(".")[0],r=!0),(n=o.model[s])&&(Array.isArray(n)?(i=[],n.forEach(function(t){i.push(o._processRelatedModel(t,e,r))}),0===i.length&&(i=null)):i=o._processRelatedModel(n,e,r),i&&(a[o.model.klass.serializeKey(s)]={data:i})))}),a},a.prototype.asJSON=function(){var t={type:this.jsonapiType},e=(this.model.id&&(t.id=this.model.id),this.model.temp_id&&(t["temp-id"]=this.model.temp_id),this.idOnly||(e=this.attributes(),0<Object.keys(e).length&&(t.attributes=e)),this.relationships()),e=(0<Object.keys(e).length&&(t.relationships=e),{data:t}),r=(0<this.included.length&&(e.included=this.included),this.model.meta);return this.model.isMetaDirty&&0<Object.keys(r).length&&(t.meta=r),e},a.prototype._isNewAndMarkedForDestruction=function(t){return!t.isPersisted&&t.isMarkedForDestruction},a.prototype._processRelatedModel=function(e,t,r){var i=this,t=(e.clearErrors(),e.isPersisted||(e.temp_id=V()),new a(e,t,r)),r=t.asJSON().data;return this._isNewAndMarkedForDestruction(e)||this._pushInclude(r),t.included.forEach(function(t){i._isNewAndMarkedForDestruction(e)||i._pushInclude(t)}),this._resourceIdentifierFor(e)},a.prototype._resourceIdentifierFor=function(t){if(!t.klass.jsonapiType)throw new Error("Cannot serialize model: Undefined jsonapiType for model "+t);var e={type:t.klass.jsonapiType};return t.id&&(e.id=t.id),t.temp_id&&(e["temp-id"]=t.temp_id),e},a.prototype._pushInclude=function(t){this._isIncluded(t)},a.prototype._isIncluded=function(e){return this.included.forEach(function(t){if(t.type===e.type&&(t.id===e.id||t["temp-id"]===e["temp-id"]))return!0}),!1},a.prototype._eachAttribute=function(i){var n=this,s=this.model.typedAttributes;Object.keys(s).forEach(function(t){var e,r=n.model.klass.attributeList[t];r.persist&&(e=s[t],i(t,e,r))})},a);function a(t,e,r){void 0===r&&(r=!1),this.included=[],this.idOnly=!1;e=new G(e);if(this.includeDirective=e.toScopeObject(),this.model=t,this.idOnly=r,!t.klass.jsonapiType)throw new Error("Cannot serialize model: Undefined jsonapiType");this.jsonapiType=t.klass.jsonapiType}tt.prototype.getItem=function(t){return this._data[t]||null},tt.prototype.setItem=function(t,e){this._data[t]=e},tt.prototype.removeItem=function(t){delete this._data[t]};var Y,X=tt;function tt(){this._data={}}try{Y=localStorage}catch(t){Y=new X}Object.defineProperty(rt.prototype,"backend",{get:function(){return this._backend},enumerable:!0,configurable:!0}),rt.prototype.getJWT=function(){return this._backend.getItem(this._jwtKey)||void 0},rt.prototype.setJWT=function(t){t?this._backend.setItem(this._jwtKey,t):this._backend.removeItem(this._jwtKey)};var et=rt;function rt(t,e){void 0===e&&(e=Y),this._jwtKey=t,this._backend=e}function it(t,e){return t===e||t!=t&&e!=e}function nt(t,e){for(var r=t.length;r--;)if(it(t[r][0],e))return r;return-1}var st=Array.prototype.splice;function l(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=function(){this.__data__=[],this.size=0},l.prototype.delete=function(t){var e=this.__data__;return!((t=nt(e,t))<0)&&(t==e.length-1?e.pop():st.call(e,t,1),--this.size,!0)},l.prototype.get=function(t){var e=this.__data__;return(t=nt(e,t))<0?void 0:e[t][1]},l.prototype.has=function(t){return-1<nt(this.__data__,t)},l.prototype.set=function(t,e){var r=this.__data__,i=nt(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this};var p="object"==typeof global&&global&&global.Object===Object&&global,h="object"==typeof self&&self&&self.Object===Object&&self,h=p||h||Function("return this")(),f=h.Symbol,d=Object.prototype,ot=d.hasOwnProperty,at=d.toString,ct=f?f.toStringTag:void 0;var ut=Object.prototype.toString;var lt="[object Null]",pt="[object Undefined]",ht=f?f.toStringTag:void 0;function ft(t){{if(null==t)return void 0===t?pt:lt;if(ht&&ht in Object(t)){var e=t,r=ot.call(e,ct),i=e[ct];try{var n=!(e[ct]=void 0)}catch(t){}var s=at.call(e);return n&&(r?e[ct]=i:delete e[ct]),s}return ut.call(t)}}function dt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var yt="[object AsyncFunction]",bt="[object Function]",vt="[object GeneratorFunction]",gt="[object Proxy]";function _t(t){if(dt(t))return t=ft(t),t==bt||t==vt||t==yt||t==gt}var d=h["__core-js_shared__"],mt=(d=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"";var jt=Function.prototype.toString;function y(t){if(null!=t){try{return jt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var wt=/^\[object .+?Constructor\]$/,d=Function.prototype,b=Object.prototype,d=d.toString,b=b.hasOwnProperty,Ot=RegExp("^"+d.call(b).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function kt(t){var e;if(dt(t)&&(e=t,!(mt&&mt in e)))return(_t(t)?Ot:wt).test(y(t))}function v(t,e){e=e;t=null==(t=t)?void 0:t[e];return kt(t)?t:void 0}var At=v(h,"Map"),Pt=v(Object,"create");var Ct=Object.prototype.hasOwnProperty;var St=Object.prototype.hasOwnProperty;function g(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function $t(t,e){var r,i,t=t.__data__;return("string"==(i=typeof(r=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?t["string"==typeof e?"string":"hash"]:t.map}function _(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}g.prototype.clear=function(){this.__data__=Pt?Pt(null):{},this.size=0},g.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},g.prototype.get=function(t){var e,r=this.__data__;return Pt?"__lodash_hash_undefined__"===(e=r[t])?void 0:e:Ct.call(r,t)?r[t]:void 0},g.prototype.has=function(t){var e=this.__data__;return Pt?void 0!==e[t]:St.call(e,t)},g.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Pt&&void 0===e?"__lodash_hash_undefined__":e,this},_.prototype.clear=function(){this.size=0,this.__data__={hash:new g,map:new(At||l),string:new g}},_.prototype.delete=function(t){return t=$t(this,t).delete(t),this.size-=t?1:0,t},_.prototype.get=function(t){return $t(this,t).get(t)},_.prototype.has=function(t){return $t(this,t).has(t)},_.prototype.set=function(t,e){var r=$t(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this};function C(t){t=this.__data__=new l(t);this.size=t.size}C.prototype.clear=function(){this.__data__=new l,this.size=0},C.prototype.delete=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t},C.prototype.get=function(t){return this.__data__.get(t)},C.prototype.has=function(t){return this.__data__.has(t)},C.prototype.set=function(t,e){var r=this.__data__;if(r instanceof l){var i=r.__data__;if(!At||i.length<199)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new _(i)}return r.set(t,e),this.size=r.size,this};var Rt=function(){try{var t=v(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();function Et(t,e,r){"__proto__"==e&&Rt?Rt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var xt=Object.prototype.hasOwnProperty;function Tt(t,e,r){var i=t[e];xt.call(t,e)&&it(i,r)&&(void 0!==r||e in t)||Et(t,e,r)}function Ft(t,e,r,i){for(var n=!r,s=(r=r||{},-1),o=e.length;++s<o;){var a=e[s],c=i?i(r[a],t[a],a,r,t):void 0;(n?Et:Tt)(r,a,c=void 0===c?t[a]:c)}return r}function Dt(t){return null!=t&&"object"==typeof t}function zt(t){return Dt(t)&&"[object Arguments]"==ft(t)}var d=Object.prototype,It=d.hasOwnProperty,Lt=d.propertyIsEnumerable,Mt=zt(function(){return arguments}())?zt:function(t){return Dt(t)&&It.call(t,"callee")&&!Lt.call(t,"callee")},Ut=Array.isArray;var b="object"==typeof t&&t&&!t.nodeType&&t,d=b&&"object"==typeof module&&module&&!module.nodeType&&module,d=d&&d.exports===b?h.Buffer:void 0,Bt=(d?d.isBuffer:void 0)||function(){return!1},Nt=/^(?:0|[1-9]\d*)$/;var Jt=9007199254740991;function Kt(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=Jt}var m={};function Wt(e){return function(t){return e(t)}}m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m["[object Arguments]"]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m["[object Function]"]=m["[object Map]"]=m["[object Number]"]=m["[object Object]"]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1;var b="object"==typeof t&&t&&!t.nodeType&&t,Ht=b&&"object"==typeof module&&module&&!module.nodeType&&module,qt=Ht&&Ht.exports===b&&p.process,d=function(){try{var t=Ht&&Ht.require&&Ht.require("util").types;return t?t:qt&&qt.binding&&qt.binding("util")}catch(t){}}(),b=d&&d.isTypedArray,Gt=b?Wt(b):function(t){return Dt(t)&&Kt(t.length)&&!!m[ft(t)]},Zt=Object.prototype.hasOwnProperty;function Vt(t,e){var r,i,n,s,o=Ut(t),a=!o&&Mt(t),c=!o&&!a&&Bt(t),u=!o&&!a&&!c&&Gt(t),l=o||a||c||u,p=l?function(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}(t.length,String):[],h=p.length;for(r in t)!e&&!Zt.call(t,r)||l&&("length"==r||c&&("offset"==r||"parent"==r)||u&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||(s=void 0,s=typeof(i=r),(n=null==(n=h)?9007199254740991:n)&&("number"==s||"symbol"!=s&&Nt.test(i))&&-1<i&&i%1==0&&i<n))||p.push(r);return p}var Qt=Object.prototype;function Yt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Qt)}function Xt(e,r){return function(t){return e(r(t))}}var te=Xt(Object.keys,Object),ee=Object.prototype.hasOwnProperty;function re(t){if(!Yt(t))return te(t);var e,r=[];for(e in Object(t))ee.call(t,e)&&"constructor"!=e&&r.push(e);return r}function ie(t){return null!=t&&Kt(t.length)&&!_t(t)}function ne(t){return(ie(t)?Vt:re)(t)}var se=Object.prototype.hasOwnProperty;function oe(t){if(!dt(t)){var e=t,r=[];if(null!=e)for(var i in Object(e))r.push(i);return r}var n,s=Yt(t),o=[];for(n in t)("constructor"!=n||!s&&se.call(t,n))&&o.push(n);return o}function ae(t){return ie(t)?Vt(t,!0):oe(t)}var p="object"==typeof t&&t&&!t.nodeType&&t,b=p&&"object"==typeof module&&module&&!module.nodeType&&module,b=b&&b.exports===p?h.Buffer:void 0,ce=b?b.allocUnsafe:void 0;function ue(){return[]}var le=Object.prototype.propertyIsEnumerable,pe=Object.getOwnPropertySymbols,he=pe?function(e){if(null==e)return[];e=Object(e);for(var t=pe(e),r=function(t){return le.call(e,t)},i=-1,n=null==t?0:t.length,s=0,o=[];++i<n;){var a=t[i];r(a,i,t)&&(o[s++]=a)}return o}:ue;function fe(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}var de=Xt(Object.getPrototypeOf,Object),ye=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)fe(e,he(t)),t=de(t);return e}:ue;function be(t,e,r){e=e(t);return Ut(t)?e:fe(e,r(t))}function ve(t){return be(t,ne,he)}function ge(t){return be(t,ae,ye)}var p=v(h,"DataView"),b=v(h,"Promise"),j=v(h,"Set"),_e=v(h,"WeakMap"),me="[object Map]",je="[object Promise]",we="[object Set]",Oe="[object WeakMap]",ke="[object DataView]",Ae=y(p),Pe=y(At),Ce=y(b),Se=y(j),$e=y(_e),w=ft,Re=w=p&&w(new p(new ArrayBuffer(1)))!=ke||At&&w(new At)!=me||b&&w(b.resolve())!=je||j&&w(new j)!=we||_e&&w(new _e)!=Oe?function(t){var e=ft(t),t="[object Object]"==e?t.constructor:void 0,t=t?y(t):"";if(t)switch(t){case Ae:return ke;case Pe:return me;case Ce:return je;case Se:return we;case $e:return Oe}return e}:w,Ee=Object.prototype.hasOwnProperty;var xe=h.Uint8Array;function Te(t){var e=new t.constructor(t.byteLength);return new xe(e).set(new xe(t)),e}var Fe=/\w*$/;var p=f?f.prototype:void 0,De=p?p.valueOf:void 0;var ze="[object Boolean]",Ie="[object Date]",Le="[object Map]",Me="[object Number]",Ue="[object RegExp]",Be="[object Set]",Ne="[object String]",Je="[object Symbol]",Ke="[object ArrayBuffer]",We="[object DataView]",He="[object Float32Array]",qe="[object Float64Array]",Ge="[object Int8Array]",Ze="[object Int16Array]",Ve="[object Int32Array]",Qe="[object Uint8Array]",Ye="[object Uint8ClampedArray]",Xe="[object Uint16Array]",tr="[object Uint32Array]";function er(t,e,r){var i,n,s,o,a=t.constructor;switch(e){case Ke:return Te(t);case ze:case Ie:return new a(+t);case We:return s=t,o=(o=r)?Te(s.buffer):s.buffer,new s.constructor(o,s.byteOffset,s.byteLength);case He:case qe:case Ge:case Ze:case Ve:case Qe:case Ye:case Xe:case tr:return o=t,s=(s=r)?Te(o.buffer):o.buffer,new o.constructor(s,o.byteOffset,o.length);case Le:return new a;case Me:case Ne:return new a(t);case Ue:return(n=new(i=t).constructor(i.source,Fe.exec(i))).lastIndex=i.lastIndex,n;case Be:return new a;case Je:return i=t,De?Object(De.call(i)):{}}}var rr=Object.create,ir=function(t){if(!dt(t))return{};if(rr)return rr(t);nr.prototype=t;t=new nr;return nr.prototype=void 0,t};function nr(){}var b=d&&d.isMap,sr=b?Wt(b):function(t){return Dt(t)&&"[object Map]"==Re(t)};var j=d&&d.isSet,or=j?Wt(j):function(t){return Dt(t)&&"[object Set]"==Re(t)},ar=1,cr=2,ur=4,lr="[object Arguments]",pr="[object Function]",hr="[object GeneratorFunction]",fr="[object Object]",S={};function dr(r,i,n,t,e,s){var o,a=i&ar,c=i&cr,u=i&ur;if(void 0===(o=n?e?n(r,t,e,s):n(r):o)){if(!dt(r))return r;var l,p,h,f,d,t=Ut(r);if(t){if(_=(m=r).length,d=new m.constructor(_),_&&"string"==typeof m[0]&&Ee.call(m,"index")&&(d.index=m.index,d.input=m.input),o=d,!a){var y=r,b=o,v=-1,g=y.length;for(b=b||Array(g);++v<g;)b[v]=y[v];return b}}else{var _=Re(r),m=_==pr||_==hr;if(Bt(r))return d=r,(f=a)?d.slice():(f=d.length,f=ce?ce(f):new d.constructor(f),d.copy(f),f);if(_==fr||_==lr||m&&!e){if(o=c||m?{}:"function"!=typeof(f=r).constructor||Yt(f)?{}:ir(de(f)),!a)return c?(h=l=r,h=(p=o)&&Ft(h,ae(h),p),Ft(l,ye(l),h)):(l=p=r,j=(h=o)&&Ft(l,ne(l),h),Ft(p,he(p),j))}else{if(!S[_])return e?r:{};o=er(r,_,a)}}var j=(s=s||new C).get(r);if(j)return j;s.set(r,o),or(r)?r.forEach(function(t){o.add(dr(t,i,n,t,r,s))}):sr(r)&&r.forEach(function(t,e){o.set(e,dr(t,i,n,e,r,s))});for(var w=t?void 0:(u?c?ge:ve:c?ae:ne)(r),O=w||r,k=function(t,e){w&&(t=r[e=t]),Tt(o,e,dr(t,i,n,e,r,s))},A=-1,P=null==O?0:O.length;++A<P&&!1!==k(O[A],A,O););}return o}S[lr]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S[fr]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S[pr]=S["[object WeakMap]"]=!1;function O(t){return dr(t,5)}(function(t){t.exports=(t={},(t=function(){this.listeners={}}).prototype={addEventListener:function(t,e,r){for(var i=[],n=arguments.length,s=0;s<n;s++)i.push(arguments[s]);i=3<i.length?i.splice(3,i.length-1):[],void 0!==this.listeners[t]?this.listeners[t].push({scope:r,callback:e,args:i}):this.listeners[t]=[{scope:r,callback:e,args:i}]},removeEventListener:function(t,e,r){if(void 0!==this.listeners[t]){for(var i=this.listeners[t].length,n=[],s=0;s<i;s++){var o=this.listeners[t][s];o.scope==r&&o.callback==e||n.push(o)}this.listeners[t]=n}},hasEventListener:function(t,e,r){if(void 0!==this.listeners[t]){var i=this.listeners[t].length;if(void 0===e&&void 0===r)return 0<i;for(var n=0;n<i;n++){var s=this.listeners[t][n];if((!r||s.scope==r)&&s.callback==e)return!0}}return!1},dispatch:function(t,e){for(var e={type:t,target:e},r=[],i=arguments.length,n=0;n<i;n++)r.push(arguments[n]);if(r=2<r.length?r.splice(2,r.length-1):[],r=[e].concat(r),void 0!==this.listeners[t])for(var s=this.listeners[t].slice(),o=s.length,n=0;n<o;n++){var a,c=s[n];c&&c.callback&&(a=r.concat(c.args),c.callback.apply(c.scope,a))}},getEvents:function(){var t,e="";for(t in this.listeners)for(var r=this.listeners[t].length,i=0;i<r;i++)var n=this.listeners[t][i],e=e+(n.scope&&n.scope.className?n.scope.className:"anonymous")+(" listen for '"+t+"'\n");return e}},new t)})(_e={exports:{}});var w=_e.exports,yr=Object.freeze({default:w,__moduleExports:w}),br=(Object.defineProperty(k.prototype,"count",{get:function(){return Object.keys(this.data).length},enumerable:!0,configurable:!0}),k.prototype.find=function(t,e){return e=(e=void 0===e?null:e)||t.storeKey,this.data[e]},k.prototype.findAll=function(t){var e=this,r=[];return t.forEach(function(t){t=e.find(t);t&&r.push(t)}),r},k.prototype.create=function(t,e){t.storeKey=e,t.stale=!1,this.data[e]=O(t.attributes)},k.prototype.updateOrCreate=function(t){var e;t.storeKey?this.create(t,t.storeKey):(e=this.keyFor(t),this.create(t,e)),yr.dispatch(t.storeKey,{},this.data[t.storeKey])},k.prototype.destroy=function(t){t.stale=!0,delete this.data[t.storeKey]},k.prototype.keyFor=function(t){return t.klass.jsonapiType+"-"+t.id},k);function k(){this.data={}}A.prototype.addResources=function(t){if(t)if(Array.isArray(t))for(var e=0,r=t;e<r.length;e++){var i=r[e];this._resources.push(i)}else this._resources.push(t)},A.prototype.instanceFor=function(t){var e=this.registry.get(t);if(e)return new e;throw new Error('Unknown type "'+t+'"')},A.prototype.relationshipInstanceFor=function(e,t){return t.find(function(t){return!(t.klass.jsonapiType!==e.type||!(t.id&&e.id&&t.id===e.id||t.temp_id&&e["temp-id"]&&t.temp_id===e["temp-id"]))})||this.instanceFor(e.type)},A.prototype.lookupAssociated=function(t,e){return t.find(function(t){return!(t.klass.jsonapiType!==e.klass.jsonapiType||!(t.temp_id&&e.temp_id&&t.temp_id===e.temp_id||t.id&&e.id&&t.id===e.id))})},A.prototype.pushRelation=function(t,e,r){var i=t[e];this.lookupAssociated(i,r)||t[e].push(r)},A.prototype.deserialize=function(t){var e=this.instanceFor(t.type);return this.deserializeInstance(e,t,{})},A.prototype.deserializeInstance=function(t,e,r){void 0===r&&(r={});var i=this.alreadyDeserialized(e);return i||(t.id=e.id,t.temp_id=e["temp-id"],t.assignAttributes(e.attributes),t.assignLinks(e.links),t.setMeta(e.meta,!1),this._deserialized.push(t),this._processRelationships(t,e.relationships||{},r),this._removeDeletions(t,r),t.isPersisted=!0,t.reset(),t)},A.prototype._removeDeletions=function(e,n){var s=this;Object.keys(n).forEach(function(r){var i=e,t=i[r];t&&(Array.isArray(t)?t.forEach(function(t,e){t.isMarkedForDestruction?i.klass.store.destroy(t):t.isMarkedForDisassociation?i[r].splice(e,1):s._removeDeletions(t,n[r]||{})}):(t=t).isMarkedForDestruction?i.klass.store.destroy(t):t.isMarkedForDisassociation?i[r]=null:s._removeDeletions(t,n[r]||{}))})},A.prototype._processRelationships=function(u,t,l){var p=this;this._iterateValidRelationships(u,t,function(t,e){var r=l[t],i=u;if(Array.isArray(e))for(var n=0,s=e;n<s.length;n++){var o=s[n],a=p.findResource(o),o=i[t],o=p.relationshipInstanceFor(a,o),o=p.deserializeInstance(o,a,r);p.pushRelation(u,t,o)}else{var a=p.findResource(e),e=i[t],c=e||p.instanceFor(a.type),c=p.deserializeInstance(c,a,r);e||(i[t]=c)}})},A.prototype._iterateValidRelationships=function(t,e,r){for(var i in e){var n;e.hasOwnProperty(i)&&(n=t.klass.deserializeKey(i),t.klass.attributeList[n]&&(i=e[i].data)&&r(n,i))}},A.prototype.alreadyDeserialized=function(e){return this._deserialized.find(function(t){return!(t.klass.jsonapiType!==e.type||!(t.id&&e.id&&t.id===e.id||t.temp_id&&e.temp_id&&t.temp_id===e["temp-id"]))})},A.prototype.findResource=function(e){return this._resources.find(function(t){return!(t.type!==e.type||!(t.id&&e.id&&t.id===e.id||t["temp-id"]&&e["temp-id"]&&t["temp-id"]===e["temp-id"]))})||e};var vr=A;function A(t,e){this._deserialized=[],this._resources=[],this.registry=t,this.payload=e,this.addResources(e.data),this.addResources(e.included)}var gr=Object.prototype.hasOwnProperty;P.prototype.checkRelation=function(t,e){var r=!1;return r=e.isPersisted&&!(this.model._originalRelationships[t]||[]).find(function(t){return JSON.stringify(t)===JSON.stringify(e.resourceIdentifier)})?!0:r},P.prototype.check=function(t){t=new G(t=void 0===t?{}:t).toScopeObject();return this._hasDirtyAttributes()||this._hasDirtyRelationships(t)||this.model.isMarkedForDestruction||this.model.isMarkedForDisassociation||this._isUnpersisted()},P.prototype.dirtyAttributes=function(){for(var t={},e=0,r=Object.keys(this.model.attributes);e<r.length;e++){var i=r[e],n=this.model._originalAttributes[i],s=this.model.attributes[i],o=this.model.klass.attributeList[i];this.model.isPersisted?o.dirtyChecker(n,s)&&(t[i]=[n,s]):t[i]=[null,s]}return t},P.prototype._isUnpersisted=function(){return!this.model.isPersisted&&JSON.stringify(this.model.attributes)!==JSON.stringify({})},P.prototype._hasDirtyAttributes=function(){var t=this.dirtyAttributes();if(null!=t){if(ie(t)&&(Ut(t)||"string"==typeof t||"function"==typeof t.splice||Bt(t)||Gt(t)||Mt(t)))return!!t.length;var e,r=Re(t);if("[object Map]"==r||"[object Set]"==r)return!!t.size;if(Yt(t))return!!re(t).length;for(e in t)if(gr.call(t,e))return!void 0}return!1},P.prototype._hasDirtyRelationships=function(t){var i=this,n=!1;return this._eachRelatedObject(t,function(t,e,r){e.isDirty(r)&&(n=!0),i.checkRelation(t,e)&&(n=!0)}),n},P.prototype._eachRelatedObject=function(i,n){var s=this;Object.keys(i).forEach(function(e){var r=i[e],t=s.model[e];(t=Array.isArray(t)?t:[t]).forEach(function(t){t&&n(e,t,r)})})};var _r=P;function P(t){this.model=t}function mr(t,e){var r,i,n=[];for(r in t)!t.hasOwnProperty(r)||null!=(i=t[r])&&""!==i&&(e&&(r=e+"["+r+"]"),Array.isArray(i)?0<(i=i.map(jr)).length&&n.push(r+"="+i.join(",")):"object"==typeof i?n.push(mr(i,r)):n.push(r+"="+jr(i)));return(n=n.filter(function(t){return!!t})).join("&")}function jr(t){var e="undefined"!=typeof window&&void 0!==window.navigator.userAgent,r=e&&window.navigator.userAgent.match(/(MSIE|Trident)/),i="string"==typeof t&&-1!==t.indexOf("%");return e&&r&&!i?encodeURIComponent(t):t}Object.defineProperty(Or.prototype,"raw",{get:function(){return this._raw_json},enumerable:!0,configurable:!0}),Object.defineProperty(Or.prototype,"data",{get:function(){return this._collection},enumerable:!0,configurable:!0}),Object.defineProperty(Or.prototype,"meta",{get:function(){return this.raw.meta||{}},enumerable:!0,configurable:!0});var wr=Or;function Or(t,e){void 0===e&&(e={data:[]}),this._collection=t,this._raw_json=e}Object.defineProperty(Ar.prototype,"raw",{get:function(){return this._raw_json},enumerable:!0,configurable:!0}),Object.defineProperty(Ar.prototype,"data",{get:function(){return this._record},enumerable:!0,configurable:!0}),Object.defineProperty(Ar.prototype,"meta",{get:function(){return this.raw.meta||{}},enumerable:!0,configurable:!0});var kr=Ar;function Ar(t,e){this._record=t,this._raw_json=e}Object.defineProperty(Cr.prototype,"raw",{get:function(){return this._raw_json},enumerable:!0,configurable:!0}),Object.defineProperty(Cr.prototype,"data",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(Cr.prototype,"meta",{get:function(){return this.raw.meta||{}},enumerable:!0,configurable:!0});var Pr=Cr;function Cr(t){this._raw_json=t}$.prototype.all=function(){return s(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return[4,this._fetch(this.model.url())];case 1:return e=t.sent(),[2,this._buildCollectionResult(e)]}})})},$.prototype.find=function(r){return s(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return[4,this._fetch(this.model.url(r))];case 1:return e=t.sent(),[2,this._buildRecordResult(e)]}})})},$.prototype.first=function(){return s(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return[4,(e=this.per(1))._fetch(e.model.url())];case 1:return e=t.sent(),[2,this._buildRecordResult(e)]}})})},$.prototype.merge=function(r){var i=this,n=this.copy();return Object.keys(r).forEach(function(t){var e=i.model.serializeKey(t);n._associations[e]=r[t]}),n},$.prototype.page=function(t){var e=this.copy();return e._pagination.number=t,e},$.prototype.per=function(t){var e=this.copy();return e._pagination.size=t,e},$.prototype.where=function(t){var e,r=this.copy();for(e in t=this._serverCasedWhereClause(t))t.hasOwnProperty(e)&&(r._filter[e]=t[e]);return r},$.prototype.extraParams=function(t){var e,r=this.copy();for(e in t)t.hasOwnProperty(e)&&(r._extraParams[e]=t[e]);return r},$.prototype.stats=function(t){var e,r=this.copy();for(e in t=this._serverCasedStatsClause(t))t.hasOwnProperty(e)&&(r._stats[e]=t[e]);return r},$.prototype.order=function(t){var e=this.copy();if("object"==typeof(t=this._serverCasedOrderClause(t)))for(var r in t)t.hasOwnProperty(r)&&(e._sort[r]=t[r]);else e._sort[t]="asc";return e},$.prototype.select=function(t){var e=this.copy();if(t=this._serverCasedFieldsClause(t),Array.isArray(t)){var r=t,i=this.model.jsonapiType;e._fields[i]=r}else for(var n in t)t.hasOwnProperty(n)&&(e._fields[n]=t[n]);return e},$.prototype.selectExtra=function(t){var e=this.copy();if(t=this._serverCasedFieldsClause(t),Array.isArray(t)){var r=t,i=this.model.jsonapiType;e._extra_fields[i]=r}else for(var n in t)t.hasOwnProperty(n)&&(e._extra_fields[n]=t[n]);return e},$.prototype.includes=function(t){var e=this.copy();t=this._serverCasedIncludesClause(t);var r,i=new G(t).toScopeObject();for(r in i)i.hasOwnProperty(r)&&(e._include[r]=i[r]);return e},$.prototype.extraFetchOptions=function(t){var e,r=this.copy();for(e in t)t.hasOwnProperty(e)&&(r._extraFetchOptions[e]=t[e]);return r},$.prototype.scope=function(){return this},$.prototype.asQueryParams=function(){var e=this,r={page:this._pagination,filter:this._filter,sort:this._sortParam(this._sort)||[],fields:this._fields,extra_fields:this._extra_fields,stats:this._stats,include:new G(this._include).toString()};return this._mergeAssociationQueryParams(r,this._associations),Object.keys(this._extraParams).forEach(function(t){r[t]=e._extraParams[t]}),r},$.prototype.toQueryParams=function(){var t=mr(this.asQueryParams());if(""!==t)return t},$.prototype.fetchOptions=function(){return I({},this.model.fetchOptions(),this._extraFetchOptions)},$.prototype.copy=function(){return O(this)},$.prototype._mergeAssociationQueryParams=function(r,i){var t,n=this;for(t in i)!function(e){var t;i.hasOwnProperty(e)&&(t=i[e].asQueryParams(),r.page[e]=t.page,r.filter[e]=t.filter,r.stats[e]=t.stats,Object.assign(r.fields,t.fields),Object.assign(r.extra_fields,t.extra_fields),t.sort.forEach(function(t){t=n._transformAssociationSortParam(e,t);r.sort.push(t)}))}(t)},$.prototype._transformAssociationSortParam=function(t,e){return-1!==e.indexOf("-")&&(e=e.replace("-",""),t="-"+t),t+"."+e},$.prototype._sortParam=function(t){if(t&&0<Object.keys(t).length){var e,r=[];for(e in t)t.hasOwnProperty(e)&&("asc"!==t[e]&&(e="-"+e),r.push(e));return r}},$.prototype._fetch=function(r){return s(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return(e=this.toQueryParams())&&(r=r+"?"+e),[4,new N(this.model.middlewareStack,this.model.logger).get(r,this.fetchOptions())];case 1:return e=t.sent(),M(this.model,e),[2,e.jsonPayload]}})})},$.prototype._buildRecordResult=function(t){var e;if(t.data instanceof Array){if(!(e=t.data[0]))return new Pr(t)}else e=t.data;return e=this.model.fromJsonapi(e,t),new kr(e,t)},$.prototype._buildCollectionResult=function(e){var r=this,i=[];return e.data.forEach(function(t){i.push(r.model.fromJsonapi(t,e))}),new wr(i,e)},$.prototype._serverCasedWhereClause=function(t){return this._serverCasedClause(t,!1)},$.prototype._serverCasedOrderClause=function(t){return"string"==typeof t?this._serverCasedClause(t,!0):this._serverCasedClause(t,!1)},$.prototype._serverCasedFieldsClause=function(t){return this._serverCasedClause(t,!0)},$.prototype._serverCasedIncludesClause=function(t){return this._serverCasedClause(t,!0)},$.prototype._serverCasedStatsClause=function(t){return this._serverCasedClause(t,!0)},$.prototype._serverCasedClause=function(t,e){var r=this;if(void 0===e&&(e=!1),"string"==typeof t)return e?this.model.serializeKey(t):t;if(t instanceof Array)return t.map(function(t){return r._serverCasedClause(t,e)});if(t instanceof Object){var i,n,s,o={};for(i in t)t.hasOwnProperty(i)&&(n=this.model.serializeKey(i),s=this._serverCasedClause(t[i],e),o[n]=s);return o}return t};var Sr=$;function $(t){this._associations={},this._pagination={},this._filter={},this._sort={},this._fields={},this._extra_fields={},this._include={},this._stats={},this._extraParams={},this._extraFetchOptions={},this.model=t}Rr.prototype.register=function(t,e){if(this._typeMap[t])throw new Error('Type "'+t+'" already registered on base class '+this._baseClass);this._typeMap[t]=e},Rr.prototype.get=function(t){return this._typeMap[t]};var $r=Rr;function Rr(t){this._typeMap={},this._baseClass=t}var Er=Object.prototype.toString;function xr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}h=function(t,e,r){return e&&Tr(t.prototype,e),r&&Tr(t,r),t};function Tr(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Fr(t){return t.split("").map(function(t){return"(?:"+t.toUpperCase()+"|"+t.toLowerCase()+")"}).join("")}function Dr(t,e){for(var r=t.length-1;0<=r;r--)t[r]===e&&Array.prototype.splice.call(t,r,1)}var zr={},Ir=(h(Lr,null,[{key:"getInstance",value:function(t){return zr[t]=zr[t]||new Lr,zr[t]}}]),h(Lr,[{key:"acronym",value:function(t){this.acronyms[t.toLowerCase()]=t;var e,r,i,n=[];for(e in this.acronyms)r=this.acronyms,i=e,Object.prototype.hasOwnProperty.call(r,i)&&n.push(this.acronyms[e]);this.acronymRegex=new RegExp(n.join("|"))}},{key:"plural",value:function(t,e){"string"==typeof t&&Dr(this.uncountables,t),Dr(this.uncountables,e),this.plurals.unshift([t,e])}},{key:"singular",value:function(t,e){"string"==typeof t&&Dr(this.uncountables,t),Dr(this.uncountables,e),this.singulars.unshift([t,e])}},{key:"irregular",value:function(t,e){Dr(this.uncountables,t),Dr(this.uncountables,e);var r,i,n=t[0],t=t.substr(1),s=e[0],e=e.substr(1);n.toUpperCase()===s.toUpperCase()?(this.plural(new RegExp("("+n+")"+t+"$","i"),"$1"+e),this.plural(new RegExp("("+s+")"+e+"$","i"),"$1"+e),this.singular(new RegExp("("+n+")"+t+"$","i"),"$1"+t),this.singular(new RegExp("("+s+")"+e+"$","i"),"$1"+t)):(r=Fr(t),i=Fr(e),this.plural(new RegExp(n.toUpperCase()+r+"$"),s.toUpperCase()+e),this.plural(new RegExp(n.toLowerCase()+r+"$"),s.toLowerCase()+e),this.plural(new RegExp(s.toUpperCase()+i+"$"),s.toUpperCase()+e),this.plural(new RegExp(s.toLowerCase()+i+"$"),s.toLowerCase()+e),this.singular(new RegExp(n.toUpperCase()+r+"$"),n.toUpperCase()+t),this.singular(new RegExp(n.toLowerCase()+r+"$"),n.toLowerCase()+t),this.singular(new RegExp(s.toUpperCase()+i+"$"),n.toUpperCase()+t),this.singular(new RegExp(s.toLowerCase()+i+"$"),n.toLowerCase()+t))}},{key:"uncountable",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];this.uncountables=this.uncountables.concat(e)}},{key:"human",value:function(t,e){this.humans.unshift([t,e])}},{key:"clear",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"all";"all"===t?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[t]=[]}}]),Lr);function Lr(){xr(this,Lr),this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}var Mr,Ur={en:function(t){t.plural(/$/,"s"),t.plural(/s$/i,"s"),t.plural(/^(ax|test)is$/i,"$1es"),t.plural(/(octop|vir)us$/i,"$1i"),t.plural(/(octop|vir)i$/i,"$1i"),t.plural(/(alias|status)$/i,"$1es"),t.plural(/(bu)s$/i,"$1ses"),t.plural(/(buffal|tomat)o$/i,"$1oes"),t.plural(/([ti])um$/i,"$1a"),t.plural(/([ti])a$/i,"$1a"),t.plural(/sis$/i,"ses"),t.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),t.plural(/(hive)$/i,"$1s"),t.plural(/([^aeiouy]|qu)y$/i,"$1ies"),t.plural(/(x|ch|ss|sh)$/i,"$1es"),t.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),t.plural(/^(m|l)ouse$/i,"$1ice"),t.plural(/^(m|l)ice$/i,"$1ice"),t.plural(/^(ox)$/i,"$1en"),t.plural(/^(oxen)$/i,"$1"),t.plural(/(quiz)$/i,"$1zes"),t.singular(/s$/i,""),t.singular(/(ss)$/i,"$1"),t.singular(/(n)ews$/i,"$1ews"),t.singular(/([ti])a$/i,"$1um"),t.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),t.singular(/(^analy)(sis|ses)$/i,"$1sis"),t.singular(/([^f])ves$/i,"$1fe"),t.singular(/(hive)s$/i,"$1"),t.singular(/(tive)s$/i,"$1"),t.singular(/([lr])ves$/i,"$1f"),t.singular(/([^aeiouy]|qu)ies$/i,"$1y"),t.singular(/(s)eries$/i,"$1eries"),t.singular(/(m)ovies$/i,"$1ovie"),t.singular(/(x|ch|ss|sh)es$/i,"$1"),t.singular(/^(m|l)ice$/i,"$1ouse"),t.singular(/(bus)(es)?$/i,"$1"),t.singular(/(o)es$/i,"$1"),t.singular(/(shoe)s$/i,"$1"),t.singular(/(cris|test)(is|es)$/i,"$1is"),t.singular(/^(a)x[ie]s$/i,"$1xis"),t.singular(/(octop|vir)(us|i)$/i,"$1us"),t.singular(/(alias|status)(es)?$/i,"$1"),t.singular(/^(ox)en/i,"$1"),t.singular(/(vert|ind)ices$/i,"$1ex"),t.singular(/(matr)ices$/i,"$1ix"),t.singular(/(quiz)zes$/i,"$1"),t.singular(/(database)s$/i,"$1"),t.irregular("person","people"),t.irregular("man","men"),t.irregular("child","children"),t.irregular("sex","sexes"),t.irregular("move","moves"),t.irregular("zombie","zombies"),t.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}};function R(t,e){var r;if(r=t,"[object Function]"===Er.call(r)&&(e=t,t=null),t=t||"en",!e)return Ir.getInstance(t);e(Ir.getInstance(t))}for(Mr in Ur)R(Mr,Ur[Mr]);function Br(t,e){var r,i,n=R(1<arguments.length&&void 0!==e?e:"en").plurals,s=""+t;if(0!==s.length){t=s.toLowerCase().match(/\b\w+$/);if(!(t&&-1<R().uncountables.indexOf(t[0])))for(var o=0,a=n.length;o<a;o++)if(r=(i=n[o])[0],i=i[1],s.match(r)){s=s.replace(r,i);break}}return s}function Nr(t){t=null==t?"":String(t);return t.charAt(0).toUpperCase()+t.slice(1)}function Jr(t,e){t=""+t;return t=(t=(e=null==e?!0:e)?t.replace(/^[a-z\d]*/,function(t){return R().acronyms[t]||Nr(t)}):t.replace(new RegExp("^(?:"+R().acronymRegex.source+"(?=\\b|[A-Z_])|\\w)"),function(t){return t.toLowerCase()})).replace(/(?:_|(\/))([a-z\d]*)/gi,function(t,e,r,i,n){return""+(e=e||"")+(R().acronyms[r]||Nr(r))})}function E(t){t=""+t;return(t=(t=(t=(t=t.replace(new RegExp("(?:([A-Za-z\\d])|^)("+R().acronymRegex.source+")(?=\\b|[^a-z])","g"),function(t,e,r){return(e||"")+(e?"_":"")+r.toLowerCase()})).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2")).replace(/([a-z\d])([A-Z])/g,"$1_$2")).replace(/-/g,"_")).toLowerCase()}function Kr(t){return t.replace(/_/g,"-")}var x,Wr={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Æ":"AE","Ç":"C","È":"E","É":"E","Ê":"E","Ë":"E","Ì":"I","Í":"I","Î":"I","Ï":"I","Ð":"D","Ñ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","×":"x","Ø":"O","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ý":"Y","Þ":"Th","ß":"ss","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ý":"y","þ":"th","ÿ":"y","Ā":"A","ā":"a","Ă":"A","ă":"a","Ą":"A","ą":"a","Ć":"C","ć":"c","Ĉ":"C","ĉ":"c","Ċ":"C","ċ":"c","Č":"C","č":"c","Ď":"D","ď":"d","Đ":"D","đ":"d","Ē":"E","ē":"e","Ĕ":"E","ĕ":"e","Ė":"E","ė":"e","Ę":"E","ę":"e","Ě":"E","ě":"e","Ĝ":"G","ĝ":"g","Ğ":"G","ğ":"g","Ġ":"G","ġ":"g","Ģ":"G","ģ":"g","Ĥ":"H","ĥ":"h","Ħ":"H","ħ":"h","Ĩ":"I","ĩ":"i","Ī":"I","ī":"i","Ĭ":"I","ĭ":"i","Į":"I","į":"i","İ":"I","ı":"i","Ĳ":"IJ","ĳ":"ij","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","ĺ":"l","Ļ":"L","ļ":"l","Ľ":"L","ľ":"l","Ŀ":"L","ŀ":"l","Ł":"L","ł":"l","Ń":"N","ń":"n","Ņ":"N","ņ":"n","Ň":"N","ň":"n","ŉ":"'n","Ŋ":"NG","ŋ":"ng","Ō":"O","ō":"o","Ŏ":"O","ŏ":"o","Ő":"O","ő":"o","Œ":"OE","œ":"oe","Ŕ":"R","ŕ":"r","Ŗ":"R","ŗ":"r","Ř":"R","ř":"r","Ś":"S","ś":"s","Ŝ":"S","ŝ":"s","Ş":"S","ş":"s","Š":"S","š":"s","Ţ":"T","ţ":"t","Ť":"T","ť":"t","Ŧ":"T","ŧ":"t","Ũ":"U","ũ":"u","Ū":"U","ū":"u","Ŭ":"U","ŭ":"u","Ů":"U","ů":"u","Ű":"U","ű":"u","Ų":"U","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","ź":"z","Ż":"Z","ż":"z","Ž":"Z","ž":"z","А":"A","Б":"B","В":"V","Г":"G","Д":"D","Е":"E","Ё":"E","Ж":"ZH","З":"Z","И":"I","Й":"J","К":"K","Л":"L","М":"M","Н":"N","О":"O","П":"P","Р":"R","С":"S","Т":"T","У":"U","Ф":"F","Х":"KH","Ц":"C","Ч":"CH","Ш":"SH","Щ":"SHCH","Ъ":"","Ы":"Y","Ь":"","Э":"E","Ю":"YU","Я":"YA","а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"zh","з":"z","и":"i","й":"j","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"kh","ц":"c","ч":"ch","ш":"sh","щ":"shch","ъ":"","ы":"y","ь":"","э":"e","ю":"yu","я":"ya"},Hr={};h(qr,null,[{key:"getInstance",value:function(t){return Hr[t]=Hr[t]||new qr,Hr[t]}}]),h(qr,[{key:"approximate",value:function(t,e){this.approximations[t]=e}},{key:"transliterate",value:function(t,e){var r=this;return t.replace(/[^\u0000-\u007f]/g,function(t){return r.approximations[t]||e||"?"})}}]);function qr(){for(var t in xr(this,qr),this.approximations={},Wr)this.approximate(t,Wr[t])}(f=x=x||{})[f.debug=1]="debug",f[f.info=2]="info",f[f.warn=3]="warn",f[f.error=4]="error";var Gr={debug:1,info:2,warn:3,error:4};function Zr(t){void 0===t&&(t="warn"),this._level=x.info,"number"==typeof t?this._level=t:this.level=t}Zr.prototype.debug=function(t){this._level<=x.debug&&console.info(t)},Zr.prototype.info=function(t){this._level<=x.info&&console.info(t)},Zr.prototype.warn=function(t){this._level<=x.warn&&console.warn(t)},Zr.prototype.error=function(t){this._level<=x.warn&&console.error(t)},Object.defineProperty(Zr.prototype,"level",{get:function(){for(var t in x)if(x.hasOwnProperty(t))if(x[t]===this._level)return t;throw new Error("Invalid log level: "+this._level)},set:function(t){t=x[t];if(!t)throw new Error("Log level must be one of "+Object.keys(Gr).join(", "));this._level=t},enumerable:!0,configurable:!0});var Vr=new Zr;function Qr(r,i){return s(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<r.length?[4,i(r[e],e,r)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e+=1,[3,1];case 4:return[2]}})})}Object.defineProperty(Xr.prototype,"beforeFilters",{get:function(){return this._beforeFilters},enumerable:!0,configurable:!0}),Object.defineProperty(Xr.prototype,"afterFilters",{get:function(){return this._afterFilters},enumerable:!0,configurable:!0}),Xr.prototype.beforeFetch=function(i,n){return s(this,void 0,void 0,function(){var r=this;return u(this,function(t){switch(t.label){case 0:return[4,Qr(this._beforeFilters,function(e){return s(r,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,e(i,n)];case 1:return t.sent(),[2]}})})})];case 1:return t.sent(),[2]}})})},Xr.prototype.afterFetch=function(i,n){return s(this,void 0,void 0,function(){var r=this;return u(this,function(t){switch(t.label){case 0:return[4,Qr(this._afterFilters,function(e){return s(r,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return[4,e(i,n)];case 1:return t.sent(),[2]}})})})];case 1:return t.sent(),[2]}})})};var Yr=Xr;function Xr(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this._beforeFilters=[],this._afterFilters=[],this._beforeFilters=t,this._afterFilters=e}function T(t,e){Object.defineProperty(t,e,{get:function(){},set:function(t){Object.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:!1})},configurable:!0,enumerable:!1})}var ti=function(t,e){for(var r in(e=I({},e)).credentialStorageBackend&&(t.credentialStorageBackend=e.credentialStorageBackend,delete e.jwtStorage),e.jwtStorage&&(t.jwtStorage=e.jwtStorage,delete e.jwtStorage),e.jwt&&(t.setJWT(e.jwt),delete e.jwt),e)e.hasOwnProperty(r)&&(t[r]=e[r]);void 0===t.isBaseClass?t.setAsBase():!0===t.isBaseClass&&(t.isBaseClass=!1)},ei=(Object.defineProperty(F,"credentialStorage",{get:function(){return this._credentialStorage},enumerable:!0,configurable:!0}),Object.defineProperty(F,"jwtStorage",{get:function(){return this._jwtStorage},set:function(t){t!==this._jwtStorage&&(this._jwtStorage=t,this.credentialStorageBackend=this._credentialStorageBackend)},enumerable:!0,configurable:!0}),Object.defineProperty(F,"credentialStorageBackend",{get:function(){return this._credentialStorageBackend},set:function(t){this._credentialStorageBackend=t,this._credentialStorage=new et(this.jwtStorage||"jwt",this._credentialStorageBackend)},enumerable:!0,configurable:!0}),F.initializeCredentialStorage=function(){this.jwtStorage&&"undefined"!=typeof localStorage?this.credentialStorageBackend=localStorage:this.credentialStorageBackend=new X},F.fromJsonapi=function(t,e){return r=this.typeRegistry,t=t,new vr(r,e).deserialize(t);var r},F.inherited=function(t){t.parentClass=this,((t.currentClass=t).prototype.klass=t).attributeList=O(t.attributeList),t.linkList=O(t.linkList)},F.setAsBase=function(){this.isBaseClass=!0,this.jsonapiType=void 0,this.typeRegistry||(this.typeRegistry=new $r(this)),this.middlewareStack||(this._middlewareStack=new Yr),this._IDMap||(this._IDMap=new br)},F.isSubclassOf=function(t){for(var e=this.currentClass;e;){if(e===t)return!0;e=e.parentClass}return!1},Object.defineProperty(F,"baseClass",{get:function(){for(var t=this.currentClass;t;){if(t.isBaseClass)return t;t=t.parentClass}},enumerable:!0,configurable:!0}),Object.defineProperty(F,"store",{get:function(){if(void 0===this.baseClass)throw new Error("No base class for "+this.name);return this.baseClass._IDMap},enumerable:!0,configurable:!0}),Object.defineProperty(F,"typeRegistry",{get:function(){if(void 0===this.baseClass)throw new Error("No base class for "+this.name);return this.baseClass._typeRegistry},set:function(t){if(!this.isBaseClass)throw new Error("Cannot set a registry on a non-base class");this._typeRegistry=t},enumerable:!0,configurable:!0}),F.registerType=function(){var t;!this.jsonapiType||(t=this.typeRegistry.get(this.jsonapiType))&&this.isSubclassOf(t)||this.typeRegistry.register(this.jsonapiType,this)},F.extend=function(t){c(i,e=this);var e,r=i;function i(){return null!==e&&e.apply(this,arguments)||this}this.inherited(r);var n,s={};if(t.attrs)for(var o in t.attrs)t.attrs.hasOwnProperty(o)&&((n=t.attrs[o]).name||(n.name=o),n.owner=r,s[o]=n);if(r.attributeList=Object.assign({},r.attributeList,s),r.linkList=r.linkList.slice(),ti(r,t.static||{}),r.registerType(),t.methods)for(var a in t.methods)t.methods.hasOwnProperty(a)&&(r.prototype[a]=t.methods[a]);return r},F.prototype._initializeAttributes=function(){this._attributes={},this._copyPrototypeDescriptors()},F.prototype._initializeLinks=function(){this._links={}},F.prototype._copyPrototypeDescriptors=function(){var t,e,r=this,i=this.klass.attributeList;for(t in i)i.hasOwnProperty(t)&&(e=i[t],Object.defineProperty(this,t,e.descriptor()));["errors","isPersisted","isMarkedForDestruction","isMarkedForDisassociation"].forEach(function(t){var e=Object.getOwnPropertyDescriptor(F.prototype,t);e&&Object.defineProperty(r,t,e)})},F.prototype.isType=function(t){return this.klass.jsonapiType===t},Object.defineProperty(F.prototype,"isPersisted",{get:function(){return this._persisted},set:function(t){(this._persisted=t)&&this.reset()},enumerable:!0,configurable:!0}),F.prototype.onSyncRelationships=function(){var r=this;return this._onSyncRelationships||(this._onSyncRelationships=function(t,e){r.relationships=e}),this._onSyncRelationships},F.prototype.onStoreChange=function(){var s=this;return this._onStoreChange||(this._onStoreChange=function(t,i){var n={};Object.keys(i).forEach(function(t){var e=s,r=s.changes();s.klass.attributeList[t].dirtyChecker(e[t],i[t])&&!r[t]&&(n[t]=[e[t],i[t]],e[t]=i[t],e._originalAttributes[t]=i[t])}),0<Object.keys(n).length&&void 0!==s.afterSync&&s.afterSync(n)}),this._onStoreChange},F.prototype.unlisten=function(){var e=this;this.klass.sync&&(this.storeKey&&(yr.removeEventListener(this.storeKey,this.onStoreChange()),yr.removeEventListener(this.storeKey+"-sync-relationships",this.onSyncRelationships())),Object.keys(this.relationships).forEach(function(t){t=e.relationships[t];t&&(Array.isArray(t)?t.forEach(function(t){return t.unlisten()}):t.unlisten())}))},F.prototype.listen=function(){!this.klass.sync||this._onStoreChange||(yr.addEventListener(this.storeKey,this.onStoreChange()),yr.addEventListener(this.storeKey+"-sync-relationships",this.onSyncRelationships()))},F.prototype.syncRelationships=function(){yr.dispatch(this.storeKey+"-sync-relationships",{},this.relationships)},F.prototype.reset=function(){this.klass.sync&&(this.klass.store.updateOrCreate(this),this.listen()),this._originalAttributes=O(this._attributes),this._originalRelationships=this.relationshipResourceIdentifiers(Object.keys(this.relationships))},F.prototype.rollback=function(){this._attributes=O(this._originalAttributes)},Object.defineProperty(F.prototype,"isMarkedForDestruction",{get:function(){return this._markedForDestruction},set:function(t){this._markedForDestruction=t},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"isMarkedForDisassociation",{get:function(){return this._markedForDisassociation},set:function(t){this._markedForDisassociation=t},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"attributes",{get:function(){return this._attributes},set:function(t){this._attributes={},this.assignAttributes(t)},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"stored",{get:function(){return this.klass.store.find(this)},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"typedAttributes",{get:function(){return this._attributes},enumerable:!0,configurable:!0}),F.prototype.relationship=function(t){return this.relationships[t]},F.prototype.assignAttributes=function(t){if(t)for(var e in t)if(t.hasOwnProperty(e)){var r=this.klass.deserializeKey(e);if("id"===e||this.klass.attributeList[r])this[r]=t[e];else if(this.klass.strictAttributes)throw new Error("Unknown attribute: "+e)}},F.prototype.setMeta=function(t,e){void 0===e&&(e=!0),this.__meta__=t,e&&(this._metaDirty=!0)},Object.defineProperty(F.prototype,"meta",{get:function(){return this.__meta__||{}},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"isMetaDirty",{get:function(){return this._metaDirty},enumerable:!0,configurable:!0}),F.prototype.relationshipResourceIdentifiers=function(t){return r=this,i={},t.forEach(function(e){var t=r.relationship(e);t&&(t=Array.isArray(t)?t:[t]).forEach(function(t){t.isPersisted&&(i[e]||(i[e]=[]),i[e].push(t.resourceIdentifier))})}),i;var r,i},F.prototype.fromJsonapi=function(t,e,r){return t=t,void 0===(r=r=void 0===r?{}:r)&&(r={}),new vr((i=this).klass.typeRegistry,e).deserializeInstance(i,t,r);var i},Object.defineProperty(F.prototype,"resourceIdentifier",{get:function(){if(void 0===this.klass.jsonapiType)throw new Error("Cannot build resource identifier for class. No JSONAPI Type specified.");return{id:this.id,type:this.klass.jsonapiType}},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"errors",{get:function(){return this._errors},set:function(t){this._errors=t},enumerable:!0,configurable:!0}),Object.defineProperty(F.prototype,"hasError",{get:function(){return!!Object.keys(this._errors).length},enumerable:!0,configurable:!0}),F.prototype.clearErrors=function(){this.errors={}},F.prototype.isDirty=function(t){return new _r(this).check(t)},F.prototype.changes=function(){return new _r(this).dirtyAttributes()},F.prototype.hasDirtyRelation=function(t,e){var r=new _r(this);return!this.isPersisted||r.checkRelation(t,e)},F.prototype.dup=function(){var t=Object.assign({},this.attributes,this.relationships),t=new this.klass(t);return t.id=this.id,t.isPersisted=this.isPersisted,t.isMarkedForDestruction=this.isMarkedForDestruction,t.isMarkedForDisassociation=this.isMarkedForDisassociation,t.errors=Object.assign({},this.errors),t.links=Object.assign({},this.links),t},F.fetchOptions=function(){var t={credentials:"same-origin",headers:((t={Accept:"application/vnd.api+json"})["Content-Type"]="application/vnd.api+json",t)},e=(this.credentials&&(t.credentials=this.credentials),this.clientApplication&&(t.headers["Client-Application"]=this.clientApplication),this.getJWT());return e&&(t.headers.Authorization=this.generateAuthHeader(e)),t},F.url=function(t){var e=this.endpoint||"/"+this.jsonapiType,e=""+this.fullBasePath()+e;return e=t?e+"/"+t:e},F.fullBasePath=function(){return""+this.baseUrl+this.apiNamespace},Object.defineProperty(F,"middlewareStack",{get:function(){var t,e,r;return this.baseClass?(t=this.baseClass._middlewareStack,this.beforeFetch||this.afterFetch?(e=this.beforeFetch?[this.beforeFetch]:t.beforeFilters,r=this.afterFetch?[this.afterFetch]:t.afterFilters,new Yr(e,r)):t):new Yr},set:function(t){this._middlewareStack=t},enumerable:!0,configurable:!0}),F.scope=function(){return new Sr(this)},F.first=function(){return this.scope().first()},F.all=function(){return this.scope().all()},F.find=function(t){return this.scope().find(t)},F.where=function(t){return this.scope().where(t)},F.page=function(t){return this.scope().page(t)},F.per=function(t){return this.scope().per(t)},F.extraParams=function(t){return this.scope().extraParams(t)},F.extraFetchOptions=function(t){return this.scope().extraFetchOptions(t)},F.order=function(t){return this.scope().order(t)},F.select=function(t){return this.scope().select(t)},F.selectExtra=function(t){return this.scope().selectExtra(t)},F.stats=function(t){return this.scope().stats(t)},F.includes=function(t){return this.scope().includes(t)},F.merge=function(t){return this.scope().merge(t)},F.setJWT=function(t){this.credentialStorage.setJWT(t)},F.getJWT=function(){return this.credentialStorage.getJWT()},Object.defineProperty(F,"jwt",{get:function(){return this.getJWT()},set:function(t){this.setJWT(t)},enumerable:!0,configurable:!0}),F.generateAuthHeader=function(t){return'Token token="'+t+'"'},F.getJWTOwner=function(){return this.logger.warn("SpraypaintBase#getJWTOwner() is deprecated. Use #baseClass property instead"),this.baseClass},F.serializeKey=function(t){switch(this.keyCase.server){case"dash":return Kr(E(t));case"snake":return E(t);case"camel":return Jr(E(t),!1)}},F.deserializeKey=function(t){switch(this.keyCase.client){case"dash":return Kr(E(t));case"snake":return E(t);case"camel":return Jr(E(t),!1)}},F.prototype.destroy=function(){return s(this,void 0,void 0,function(){var e,r,i,n=this;return u(this,function(t){switch(t.label){case 0:e=this.klass.url(this.id),r=new N(this._middleware(),this.klass.logger),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.delete(e,this._fetchOptions())];case 2:return i=t.sent(),[3,4];case 3:throw t.sent();case 4:return 202!==i.status?[3,6]:[4,this._handleAcceptedResponse(i,this.onDeferredDestroy)];case 5:return[2,t.sent()];case 6:return this.klass.baseClass.store.destroy(this),[4,this._handleResponse(i,function(){n.isPersisted=!1})];case 7:return[2,t.sent()]}})})},F.prototype.save=function(c){return void 0===c&&(c={}),s(this,void 0,void 0,function(){var e,r,i,n,s,o,a=this;return u(this,function(t){switch(t.label){case 0:if(e=this.klass.url(),r="post",i=new N(this._middleware(),this.klass.logger,{patchAsPost:this.klass.patchAsPost}),n=new Q(this,c.with),this.isPersisted&&(e=this.klass.url(this.id),r="patch"),c.returnScope){if((o=c.returnScope).model!==this.klass)throw new Error("returnScope must be a scope of type Scope<"+this.klass.name+">");e=e+"?"+o.toQueryParams()}this.clearErrors(),o=n.asJSON(),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i[r](e,o,this._fetchOptions())];case 2:return s=t.sent(),[3,4];case 3:throw t.sent();case 4:return 202!==s.status&&204!==s.status?[3,6]:[4,this._handleAcceptedResponse(s,this.onDeferredUpdate)];case 5:return[2,t.sent()];case 6:return[4,this._handleResponse(s,function(){a.fromJsonapi(s.jsonPayload.data,s.jsonPayload,n.includeDirective),n.postProcess()})];case 7:return[2,t.sent()]}})})},F.prototype._handleAcceptedResponse=function(r,i){return s(this,void 0,void 0,function(){var e;return u(this,function(t){switch(t.label){case 0:return r.jsonPayload&&i&&(e=this.klass.fromJsonapi(r.jsonPayload.data,r.jsonPayload),i(e)),[4,this._handleResponse(r,function(){})];case 1:return[2,t.sent()]}})})},F.prototype._handleResponse=function(e,r){return s(this,void 0,void 0,function(){return u(this,function(t){if(M(this.klass,e),422!==e.status)return r(),[2,!0];try{L.apply(this,e.jsonPayload)}catch(t){throw new o(e,"validation failed",t)}return[2,!1]})})},F.prototype._fetchOptions=function(){return this.klass.fetchOptions()},F.prototype._middleware=function(){return this.klass.middlewareStack},F.prototype.resetRelationTracking=function(t){this._originalRelationships=this.relationshipResourceIdentifiers(Object.keys(t))},Object.defineProperty(F.prototype,"links",{get:function(){return this._links},set:function(t){this._links={},this.assignLinks(t)},enumerable:!0,configurable:!0}),F.prototype.assignLinks=function(t){if(t)for(var e in t){var r=this.klass.deserializeKey(e);-1<this.klass.linkList.indexOf(r)&&(this._links[r]=t[e])}},F.baseUrl="http://please-set-a-base-url.com",F.apiNamespace="/",F.keyCase={server:"snake",client:"camel"},F.strictAttributes=!1,F.logger=Vr,F.sync=!1,F.clientApplication=null,F.patchAsPost=!1,F.attributeList={},F.linkList=[],(F.currentClass=F)._jwtStorage="jwt",F.isSpraypaintModel=!0,e([T],F.prototype,"afterSync",void 0),e([T],F.prototype,"relationships",void 0),e([T],F.prototype,"klass",void 0),e([T],F.prototype,"_persisted",void 0),e([T],F.prototype,"_markedForDestruction",void 0),e([T],F.prototype,"_markedForDisassociation",void 0),e([T],F.prototype,"_originalRelationships",void 0),e([T],F.prototype,"_attributes",void 0),e([T],F.prototype,"_originalAttributes",void 0),e([T],F.prototype,"_links",void 0),e([T],F.prototype,"_originalLinks",void 0),e([T],F.prototype,"__meta__",void 0),e([T],F.prototype,"_metaDirty",void 0),e([T],F.prototype,"_errors",void 0),F);function F(t){this.stale=!1,this.storeKey="",this.relationships={},this._persisted=!1,this._markedForDestruction=!1,this._markedForDisassociation=!1,this._originalRelationships={},this._metaDirty=!1,this._errors={},this._initializeAttributes(),this._initializeLinks(),this.assignAttributes(t),this._originalAttributes=O(this._attributes),this._originalLinks=O(this._links),this._originalRelationships=this.relationshipResourceIdentifiers(Object.keys(this.relationships))}(ei.prototype.klass=ei).initializeCredentialStorage();function ri(t,e){return t!==e}var ii=function(t){return!!t&&(t.currentClass&&t.currentClass.isSpraypaintModel)},D=(ni.prototype.apply=function(t){Object.defineProperty(t.prototype,this.name,this.descriptor())},ni.prototype.setter=function(t,e){t._attributes[this.name]=e},ni.prototype.getter=function(t){return t.attributes[this.name]},ni.prototype.descriptor=function(){var e=this;return{configurable:!0,enumerable:!0,get:function(){return e.getter(this)},set:function(t){e.setter(this,t)}}},ni);function ni(t){this.isRelationship=!1,this.type=void 0,this.persist=!0,this.dirtyChecker=ri,t&&(t.name&&(this.name=t.name),t.type&&(this.type=t.type),void 0!==t.persist&&(this.persist=!!t.persist),t.dirtyChecker&&(this.dirtyChecker=t.dirtyChecker))}function si(t){return!!t.klass.sync&&((t.isPersisted||t.stale)&&!t.stored)}c(ai,oi=D),Object.defineProperty(ai.prototype,"klass",{get:function(){return this._klass||(this._klass=gi(this,this.jsonapiType)),this._klass},enumerable:!0,configurable:!0}),ai.prototype.getter=function(t){var e=t.relationships[this.name];return e&&si(e)&&delete t.relationships[this.name],t.relationships[this.name]},ai.prototype.setter=function(t,e){e&&!e.hasOwnProperty("isRelationship")?(e instanceof ei||Array.isArray(e)||(e=new this.klass(e)),t.relationships[this.name]=e):null==e&&(t.relationships[this.name]=e)};var oi,p=ai;function ai(t){var e=oi.call(this,t)||this;return e.isRelationship=!0,t.jsonapiType&&(e.jsonapiType=t.jsonapiType),e.type&&(e._klass=e.type),e}c(li,ci=D),Object.defineProperty(li.prototype,"klass",{get:function(){return this._klass||(this._klass=gi(this,this.jsonapiType)),this._klass},enumerable:!0,configurable:!0}),li.prototype.getter=function(t){var e=t.relationships[this.name];if(e)for(var r=e.length;r--;)si(e[r])&&(t.relationships[this.name],e.splice(r,1));else this.setter(t,[]);return t.relationships[this.name]},li.prototype.setter=function(t,e){e&&!e.hasOwnProperty("isRelationship")?(e instanceof ei||Array.isArray(e)||(e=new this.klass(e)),t.relationships[this.name]=e):null==e&&(t.relationships[this.name]=e)};var ci,ui=li;function li(t){var e=ci.call(this,t)||this;return e.isRelationship=!0,t.jsonapiType&&(e.jsonapiType=t.jsonapiType),e.type&&(e._klass=e.type),e}c(fi,pi=p);var pi,hi=fi;function fi(){return null!==pi&&pi.apply(this,arguments)||this}c(bi,di=p);var di,yi=bi;function bi(){return null!==di&&di.apply(this,arguments)||this}function vi(t){var e={};return void 0!==t&&("string"==typeof t?e={jsonapiType:t}:(e={persist:t.persist,name:t.name},"string"==typeof t.type?e.jsonapiType=t.type:e.type=t.type)),e}var gi=function(t,e){t=t.owner.typeRegistry.get(e);if(t)return t;throw new Error('Unknown type "'+e+'"')},_i="undefined"!=typeof window,mi={productionTip:!("production"===process.env.NODE_ENV)};function ji(o){return function(r,t,n){function i(t,e){void 0===n?(i=Br(E(e)),s={jsonapiType:i}):"string"==typeof n?s={jsonapiType:n}:ii(n)?s={type:n}:(s={persist:n.persist,name:n.name},"string"==typeof n.type?s.jsonapiType=n.type:s.type=n.type);var r,i=new o(s);return i.name||(i.name=e),r=t.constructor,Oi(r),(r.attributeList[e]=i).owner=t.constructor,i.apply(r),i.descriptor()}var s;return wi(r)?Object.assign(r,{finisher:function(t){i(t.prototype,r.key)}}):ii(r)&&t?void i(r.prototype,t):function(e,t){return wi(e)?Object.assign(e,{finisher:function(t){i(t.prototype,e.key)}}):(n=r,i(e,t))}}}var wi=function(t){return t&&void 0!==t.kind},Oi=function(t){t.currentClass!==t&&t.currentClass.inherited(t)},b=ji(ui),d=ji(hi),j=ji(yi);t.SpraypaintBase=ei,t.Attribute=D,t.attr=function(t){return new D(t=t||{})},t.hasMany=function(t){t=vi(t);return new ui(t)},t.hasOne=function(t){t=vi(t);return new hi(t)},t.belongsTo=function(t){t=vi(t);return new yi(t)},t.Model=function(i){return e=function(t){var e=t,r=i;Oi(e),ti(e,r||{}),e.jsonapiType||e.isBaseClass||(e.jsonapiType=Br(E(e.name)),mi.productionTip&&_i&&Vr.warn('Inferring model jsonapiType as "'+e.jsonapiType+'".\nYou should explicitly set this on your model if targeting a minified code bundle.'));return e.registerType(),t},function(t){return wi(t)?Object.assign(t,{finisher:e}):e(t)};var e},t.Attr=function(e,t,r){function i(t,e){return Oi(t),n.name||(n.name=e),(t.attributeList[e]=n).apply(t),n.descriptor()}var n=new D({name:t});if(wi(e))return Object.assign(e,{finisher:function(t){i(t,e.key)}});if(!(ii(e)||(s=e)&&ii(s.constructor.currentClass)))return e&&(n=new D(e)),function(t,e){return i(t.constructor,e)};if(!t)throw new Error("Must provide a propertyKey");var s=e;if(!ii(s))return i(s.constructor,t);r&&(n=new D(r)),i(s,t)},t.HasMany=b,t.HasOne=d,t.BelongsTo=j,t.Link=function(e){function r(t,e){Oi(t),t.linkList.push(e)}return wi(e)?Object.assign(e,{finisher:function(t){r(t,e.key)}}):function(t,e){r(t.constructor,e)}},t.MiddlewareStack=Yr,t.Scope=Sr,t.Request=N,Object.defineProperty(t,"__esModule",{value:!0})});
